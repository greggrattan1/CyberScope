USE [FCEBCyberScorecard]
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[Cyber].[FISMA_CIO_Metric_Staging]') AND type in (N'U'))
DROP TABLE [Cyber].[FISMA_CIO_Metric_Staging]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [Cyber].[FISMA_CIO_Metric_Staging]
(
[ID] INT IDENTITY(1,1) NOT NULL,
[Reporting_Year] INT NOT NULL,
[Reporting_Quarter] INT NOT NULL,
[CyberScope_Agency_ID] INT NOT NULL, 
[Question_ID] VARCHAR(20) NOT NULL,
[Identifier_Text] VARCHAR(50) NULL, 
[Answer] VARCHAR(MAX) NULL,
[Last_Modified_Date] DATETIME NULL,
[Last_Modified_By] VARCHAR(50) NULL
 CONSTRAINT [PK_FISMA_CIO_Metric_Staging] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
   ,[Reporting_Year] DESC
   ,[Reporting_Quarter] DESC
   ,[CyberScope_Agency_ID] ASC
   ,[Question_ID] ASC

)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON)
) ON [PRIMARY]

CREATE NONCLUSTERED INDEX [IDX1_FISMA_CIO_Metric_Staging] 
ON [Cyber].[FISMA_CIO_Metric_Staging]
([Reporting_Year]) 
WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON)

CREATE NONCLUSTERED INDEX [IDX2_FISMA_CIO_Metric_Staging] 
ON [Cyber].[FISMA_CIO_Metric_Staging]
([Reporting_Quarter]) 
WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON)

CREATE NONCLUSTERED INDEX [IDX3_FISMA_CIO_Metric_Staging] 
ON [Cyber].[FISMA_CIO_Metric_Staging]
([CyberScope_Agency_ID]) 
WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON)

CREATE NONCLUSTERED INDEX [IDX4_FISMA_CIO_Metric_Staging] 
ON [Cyber].[FISMA_CIO_Metric_Staging]
([Question_ID]) 
WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON)







--MAYBE MONTHLY PARTITION ON LAST MODIFIEDDATE

